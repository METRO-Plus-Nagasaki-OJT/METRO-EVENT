<!-- participant_management.html -->
{% extends "dashboard/master.html" %}

{% block title %}Participant Management{% endblock %}

{% block content %}
<!-- Container -->

<div class="mb-4 bg-gray-200 px-1 py-5">
    <h2 class="text-2xl">PARTICIPANT</h2>
    <span>Participants List</span>
</div>

<div class="px-5 py-5">


    <!-- Events Dropdown -->
    <div class="mb-4 flex items-center">
        <label for="events" class="mr-2 text-sm font-medium text-gray-700">Select Event:</label>
        <select id="events"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 lg:w-1/2">
            {% for event in events %}
            <option value="{{ event.id }}">{{ event.name }}</option>
            {% endfor %}
        </select>
    </div>

    <!-- New Participant Button -->
    <div class="mb-4">
        <button id="openModal"
            class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Register
            New Participant</button>
    </div>

    <!-- Register Modal -->
    <div id="participantModal" x-data="participantModal"
        class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50">
        <form class="bg-white p-5 rounded-lg w-full sm:w-2/3" x-clover-form="submit" action="{% url 'participant' %}"
            method="post">
            {% csrf_token %}
            <div class="bg-blue-500 px-4 py-4">
                <h3 class="text-xl mb-4 text-white pt-3">Register New Participant</h3>
            </div>
            <div class="flex flex-wrap -mx-2">
                <!-- Image Container -->
                <div class="w-full sm:w-1/3 p-2 pt-5">
                    <div id="imageContainer" class="border border-gray-300 h-[400px] flex items-center justify-center">
                        <img id="capturedImage" class="h-full w-full object-cover" src="">
                    </div>
                    <div class="mt-2 flex flex-col items-center space-y-2 py-7">
                        <button id="cameraButton" type="button"
                            class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 w-full"
                            @click="initCamera">Camera</button>
                        <canvas id="captureCanvas" class="hidden"></canvas>
                        <button id="captureButton" type="button" name="profile"
                            class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 w-full"
                            @click="captureImage" :disabled="!isCameraReady">Capture</button>
                    </div>
                </div>

                <!-- Input Fields -->
                <div class="w-full sm:w-2/3 p-2">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
                            <input type="text" id="name" name="name" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.name" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="email" name="email" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.email" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="participant_no"
                                class="block text-sm font-medium text-gray-700">ParticipantNo</label>
                            <input type="text" id="seat_no" name="ptno" x-clover-verify
                                class="mt-1 block w-[395px] border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.ptno" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="dob" class="block text-sm font-medium text-gray-700">DateOfBirth</label>
                            <input type="date" id="dob" name="dob" x-clover-verify
                                class="mt-1 block w-[395px] border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.dob" class="text-red-600"></span>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Gender</label>
                            <div class="mt-1 flex pt-4">
                                <input type="radio" id="male" name="gender" value="male" class="mr-1" checked>
                                <label for="male" class="mr-4">Male</label>
                                <input type="radio" id="female" name="gender" value="female" class="mr-1">
                                <label for="female">Female</label>
                            </div>
                        </div>
                        <div>
                            <label for="occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                            <select id="occupation" name="role" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="occupation1">Occupation 1</option>
                                <option value="occupation2">Occupation 2</option>
                                <option value="occupation3">Occupation 3</option>
                            </select>
                            <span x-text="errors.occupation" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="phone1" class="block text-sm font-medium text-gray-700">PhNo1</label>
                            <input type="text" id="phone1" name="phone1" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.phone1" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="phone2" class="block text-sm font-medium text-gray-700">PhNo2</label>
                            <input type="text" id="phone2"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        </div>

                        <div class="sm:col-span-2 mt-4">
                            <label for="memo" class="block text-sm font-medium text-gray-700">Memo</label>
                            <textarea id="memo" rows="2"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                        </div>
                        <div class="sm:col-span-2 mt-4">
                            <label for="address" class="block text-sm font-medium text-gray-700">Address</label>
                            <textarea id="address" rows="2" name="address" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                            <span x-text="errors.address" class="text-red-600"></span>
                        </div>
                    </div>
                </div>



                <!-- Register and Cancel Buttons -->
                <div class="mt-4 flex justify-end w-full">
                    <button id="registerParticipant" type="submit"
                        class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2">Register</button>
                    <button id="cancelRegistration"
                        class="text-gray-700 bg-gray-200 hover:bg-gray-300 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5">Cancel</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Update and Cancel Buttons -->
    <div id="editModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50">
        <form class="bg-white p-5 rounded-lg w-full sm:w-2/3" x-data="editModal" x-clover-form="submit">
            <div class="bg-blue-500 px-4 py-4">
                <h3 class="text-xl mb-4 text-white pt-3">Update Details</h3>
            </div>
            <div class="flex flex-wrap -mx-2">
                <!-- Image Container -->
                <div class="w-full sm:w-1/3 p-2 pt-5">
                    <div id="imageContainer" class="border border-gray-300 h-[400px] flex items-center justify-center">
                        <span>No image</span>
                    </div>
                    <div class="mt-2 flex flex-col items-center space-y-2 py-7">
                        <button id="cameraButton"
                            class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 w-full">Camera</button>
                        <input type="file" id="fileInput" class="hidden" accept="image/*">
                        <button id="fileButton"
                            class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 w-full">Upload</button>
                        <button id="deleteImage"
                            class="text-red-600 bg-red-300 hover:bg-red-500 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 w-full">Delete
                            Image</button>
                    </div>
                </div>

                <!-- Input Fields -->
                <div class="w-full sm:w-2/3 p-2">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700">Name</label>
                            <input type="text" id="name" name="editname" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.editname" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="email" name="editemail" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.editemail" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="participant_no"
                                class="block text-sm font-medium text-gray-700">ParticipantNo</label>
                            <input type="text" id="participant_no" name="editptno" x-clover-verify
                                class="mt-1 block w-[395px] border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.editptno" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="dob" class="block text-sm font-medium text-gray-700">DateOfBirth</label>
                            <input type="date" id="dob" name="editdob" x-clover-verify
                                class="mt-1 block w-[395px] border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.editdob" class="text-red-600"></span>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Gender</label>
                            <div class="mt-1 flex pt-4">
                                <input type="radio" id="male" name="gender" value="male" class="mr-1" checked>
                                <label for="male" class="mr-4">Male</label>
                                <input type="radio" id="female" name="gender" value="female" class="mr-1">
                                <label for="female">Female</label>
                            </div>
                        </div>
                        <div>
                            <label for="occupation" class="block text-sm font-medium text-gray-700">Occupation</label>
                            <select id="occupation" name="editoccupation" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="occupation1">Occupation 1</option>
                                <option value="occupation2">Occupation 2</option>
                                <option value="occupation3">Occupation 3</option>
                            </select>
                            <span x-text="errors.editoccupation" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="phone1" class="block text-sm font-medium text-gray-700">PhNo1</label>
                            <input type="text" id="phone1" name="editphone1" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <span x-text="errors.editphone1" class="text-red-600"></span>
                        </div>
                        <div>
                            <label for="phone2" class="block text-sm font-medium text-gray-700">PhNo2</label>
                            <input type="text" id="phone2"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                        </div>

                        <div class="sm:col-span-2 mt-4">
                            <label for="memo" class="block text-sm font-medium text-gray-700">Memo</label>
                            <textarea id="memo" rows="2"
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                        </div>
                        <div class="sm:col-span-2 mt-4">
                            <label for="address" class="block text-sm font-medium text-gray-700">Address</label>
                            <textarea id="address" rows="2" name="editaddress" x-clover-verify
                                class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
                            <span x-text="errors.editaddress" class="text-red-600"></span>
                        </div>
                    </div>
                </div>



                <!-- Edit and Cancel Buttons -->
                <div class="mt-4 flex justify-end w-full">
                    <button id="updateParticipant" type="submit"
                        class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2">Update</button>

                    <button id="deleteEdit"
                        class=" bg-red-300 hover:bg-red-500 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 text-red-600">Delete</button>

                    <button id="cancelEdit"
                        class="text-gray-700 bg-gray-200 hover:bg-gray-300 focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5">Cancel</button>
                </div>
            </div>
        </form>
    </div>

</div>

<!-- Pagination Controls and Search Bar -->
<div class="flex justify-between items-center mb-4 px-5">
    <div class="flex items-center">
        <label for="pagination" class="mr-2 text-sm font-medium text-gray-700">Show:</label>
        <select id="pagination"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 p-2.5"
            style="width: 200px;">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="50">50</option>
        </select>
    </div>
    <div class="relative flex items-center mx-auto">
        <input type="text" id="search"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 pl-10"
            placeholder="Search by name or ID">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg aria-hidden="true" class="w-5 h-5 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd"
                    d="M12.9 14.32a8 8 0 111.41-1.41l5.38 5.38a1 1 0 01-1.42 1.42l-5.37-5.39zM8 14A6 6 0 108 2a6 6 0 000 12z"
                    clip-rule="evenodd" />
            </svg>
        </div>
        <button
            class="ml-2 text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5">Search</button>
    </div>
    <div class="relative flex items-center mx-end">
        <button
            class="ml-2 text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5">Download
            CSV</button>
    </div>
</div>

<!-- Participants Table -->
<div class="overflow-x-auto relative shadow-md sm:rounded-lg px-5">
    <table class="w-full text-sm text-left text-gray-500">
        <thead class="text-xs text-gray-700 uppercase bg-gray-50">
            <tr>
                <th scope="col" class="py-3 px-6 w-4"></th>
                <th scope="col" class="py-3 px-6">Participant ID</th>
                <th scope="col" class="py-3 px-6">Name</th>
                <th scope="col" class="py-3 px-6">Seat Number</th>
                <th scope="col" class="py-3 px-6">Date of Birth</th>
                <th scope="col" class="py-3 px-6">Phone Number</th>
                <th scope="col" class="py-3 px-6">Status</th>
            </tr>
        </thead>
        <tbody>
            <!-- Example row (Replace with dynamic data) -->
            {% for participant in participants %}
            <tr class="bg-white border-b">
                <td class="py-4 px-6">
                    <button
                        class="text-white bg-blue-500 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-3 py-1 open-edit-modal"
                        data-participant-id="{{ participant.id }}">Details</button>
                </td>
                <td class="py-4 px-6">{{ participant.id }}</td>
                <td class="py-4 px-6">{{ participant.name }}</td>
                <td class="py-4 px-6">{{ participant.seat_no }}</td>
                <td class="py-4 px-6">{{ participant.dob }}</td>
                <td class="py-4 px-6">{{ participant.phone }}</td>
                <td class="py-4 px-6">{{ participant.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination Controls -->
<div class="flex justify-between items-center mt-4 px-5">
    <div class="text-sm text-gray-700">
        Showing <span class="font-medium">{{ page.start_index }}</span> to <span class="font-medium">{{
            page.end_index }}</span> of <span class="font-medium">{{ page.total_count }}</span> results
    </div>
    <nav aria-label="Page navigation">
        <ul class="inline-flex items-center -space-x-px">
            {% if page.has_previous %}
            <li>
                <a href="?page={{ page.previous_page_number }}"
                    class="block py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700">
                    <span class="sr-only">Previous</span>
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M12.293 4.293a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L13 7.414V17a1 1 0 11-2 0V7.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4z"
                            clip-rule="evenodd" />
                    </svg>
                </a>
            </li>
            {% endif %}
            {% for num in page.paginator.page_range %}
            <li>
                <a href="?page={{ num }}"
                    class="block py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700">{{
                    num }}</a>
            </li>
            {% endfor %}
            {% if page.has_next %}
            <li>
                <a href="?page={{ page.next_page_number }}"
                    class="block py-2 px-3 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700">
                    <span class="sr-only">Next</span>
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M7.707 15.707a1 1 0 01-1.414-1.414L11.586 9 6.293 3.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5z"
                            clip-rule="evenodd" />
                    </svg>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
</div>
</div>

<script>
    //Register Modal handling
    const openModalButton = document.getElementById('openModal');
    const closeModalButton = document.getElementById('cancelRegistration');
    const modal = document.getElementById('participantModal');

    openModalButton.addEventListener('click', () => {
        modal.classList.remove('hidden');
    });

    closeModalButton.addEventListener('click', () => {
        modal.classList.add('hidden');
    });

    //Edit Modal Handling
    document.addEventListener('DOMContentLoaded', function () {
        const openEditButtons = document.querySelectorAll('.open-edit-modal');
        const editModal = document.getElementById('editModal');

        openEditButtons.forEach(button => {
            button.addEventListener('click', function () {
                editModal.classList.remove('hidden');
            });
        });

        const cancelEditButton = document.getElementById('cancelEdit');
        if (cancelEditButton) {
            cancelEditButton.addEventListener('click', function () {
                editModal.classList.add('hidden');
            });
        }

        const openParticipantButtons = document.querySelectorAll('.open-participant-modal');
        const participantModal = document.getElementById('participantModal');

        openParticipantButtons.forEach(button => {
            button.addEventListener('click', function () {
                participantModal.classList.remove('hidden');
            });
        });

        const cancelParticipantButton = document.getElementById('cancelRegistration');
        if (cancelParticipantButton) {
            cancelParticipantButton.addEventListener('click', function () {
                participantModal.classList.add('hidden');
            });
        }
    });

    // Image preview handling
    const imageContainer = document.getElementById('imageContainer');
    const fileInput = document.getElementById('fileInput');

    fileInput.addEventListener('change', (event) => {
        const file = event.target.files[0];
        const reader = new FileReader();

        reader.onload = () => {
            const img = document.createElement('img');
            img.src = reader.result;
            img.classList.add('h-full', 'w-full', 'object-cover');
            imageContainer.innerHTML = '';
            imageContainer.appendChild(img);
        };

        reader.readAsDataURL(file);
    });

    document.addEventListener("alpine:init", () => {
        Alpine.data("participantModal", () => ({
            webcamStream: null,
            videoElement: null,
            captureCanvas: null,
            isCameraReady: false,
            rule: {
                name: [Clover.rule.required()],
                email: [Clover.rule.mail()],
                seat_no: [Clover.rule.required()],
                dob: [Clover.rule.required()],
                role: [Clover.rule.required()],
                phone1: [Clover.rule.required()],
                address: [Clover.rule.required()],
            },
            errors: {},
            submit() {

            },
            // async submit() {
            //     const body = new FormData(this.$el)
            //     try {
            //         const res = await fetch("/participant/", {
            //             method: "POST",
            //             body,
            //         })
            //         const data = await res.json()
            //         if (!res.ok) {
            //             throw data
            //         }
            //     } catch (error) {
            //         console.error(error)
            //     }
            // },

            initCamera() {
                this.videoElement = document.createElement('video');
                this.captureCanvas = document.getElementById('captureCanvas');
                const imageContainer = document.getElementById('imageContainer');
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(stream => {
                        this.webcamStream = stream;
                        this.videoElement.srcObject = stream;
                        this.videoElement.play();
                        this.isCameraReady = true;
                        // Display video stream in imageContainer
                        imageContainer.innerHTML = '';
                        imageContainer.appendChild(this.videoElement);
                    })
                    .catch(err => {
                        console.error('Error accessing webcam:', err);
                    });
            },

            captureImage() {
                if (this.isCameraReady) {
                    const context = this.captureCanvas.getContext('2d');
                    this.captureCanvas.width = this.videoElement.videoWidth;
                    this.captureCanvas.height = this.videoElement.videoHeight;
                    context.drawImage(this.videoElement, 0, 0, this.captureCanvas.width, this.captureCanvas.height);

                    // Optionally display the captured image in imageContainer
                    const img = document.createElement('img');
                    img.src = this.captureCanvas.toDataURL('image/jpeg');
                    img.classList.add('h-full', 'w-full', 'object-cover');
                    document.getElementById('imageContainer').innerHTML = '';
                    document.getElementById('imageContainer').appendChild(img);

                    // Stop webcam after capturing image
                    this.stopCamera();
                }
            },

            stopCamera() {
                if (this.webcamStream) {
                    this.webcamStream.getTracks().forEach(track => track.stop());
                    this.videoElement.srcObject = null;
                    this.webcamStream = null;
                    this.isCameraReady = false;
                }
            }

        }))

        Alpine.data("editModal", () => ({
            rule: {
                editname: [Clover.rule.required()],
                editemail: [Clover.rule.mail()],
                editptno: [Clover.rule.required()],
                editdob: [Clover.rule.required()],
                editoccupation: [Clover.rule.required()],
                editphone1: [Clover.rule.required()],
                editaddress: [Clover.rule.required()],
            },
            errors: {},
            submit() {

            }
        }))
    })

    // $(document).ready(function() {
    //         $('#registerForm').submit(function(event) {
    //             event.preventDefault(); // Prevent default form submission

    //             var formData = {
    //                 'name': $('name').val(),
    //                 'email': $('email').val(),
    //                 'participant_no': $('participant_no').val(),
    //                 'dob': $('dob').val(),
    //                 'gender': $('input[name=gender]:checked').val(),
    //                 'occupation': $('occupation').val(),
    //                 'phone1': $('#phone1').val(),
    //                 'phone2': $('phone2').val(),
    //                 'memo': $('memo').val(),
    //                 'address': $('address').val()
    //             };

    //             $.ajax({
    //                 type: 'POST',
    //                 url: '/register/',  // Endpoint URL where your Django view is located
    //                 data: formData,
    //                 success: function(response) {
    //                     console.log('Success:', response);
    //                     // Optionally, handle success response here (e.g., show success message)
    //                 },
    //                 error: function(xhr, status, error) {
    //                     console.log('Error:', error);
    //                     // Optionally, handle error response here (e.g., show error message)
    //                 }
    //             });
    //         });
    //     });





</script>

{% endblock %}